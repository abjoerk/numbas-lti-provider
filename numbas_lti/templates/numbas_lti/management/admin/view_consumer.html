{% extends "numbas_lti/management/admin/base.html" %}
{% load i18n %}
{% load bootstrap %}

{% block management_content %}
<div class="container">
    <header>
    <h1>{% trans "Manage a consumer" %}</h1>
    </header>

    <dl>
        <dt>Key</dt>
        <dd><code>{{consumer.key}}</code></dd>
        <dt>Secret</dt>
        <dd><code>{{consumer.secret}}</code></dd>
    </dl>

    <main>
        <h2>{% trans "Resources" %}</h2>
        {% for context in consumer.contexts.all|dictsort:"label" %}
        {% if context.resources.exists %}
        <h3>{{context.name|default:"Unnamed course"}} {% if context.label %}({{context.label}}){% endif %}</h3>

        <ul>
            {% for resource in context.resources.all %}
            <li>
            <h3><a href="{% url 'dashboard' resource.pk %}" target="_blank">{{resource.title|default:"Unnamed resource"}} {% if resource.exam.title and resource.title != resource.exam.title %}({{resource.exam.title}}){% endif %}</a></h3>
                <p>{% trans "Created" %} {{resource.creation_time}}</p>
                <p>
                    {% blocktrans count num_attempts=resource.attempts.count %}
                    1 attempt.
                    {% plural %}
                    {{num_attempts}} attempts.
                    {% endblocktrans %}
                </p>
            </li>
            {% endfor %}
        </ul>
        {% endif %}
        {% endfor %}
    </main>
</div>
{% endblock management_content %}
