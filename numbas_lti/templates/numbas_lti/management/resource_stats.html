{% extends "numbas_lti/management/base.html" %}
{% load bootstrap %}
{% load i18n %}
{% load staticfiles %}

{% block management_content %}
<h2>{% trans "Statistics" %}</h2>

<h3>{% trans "Attempt completion" %}</h3>
<table class="table" id="completion-table">
    <tbody>
        {% for label,value,n in completion_counts %}
        <tr>
            <td>{{label}}</td>
            <td class="value" data-value="{{value}}">{{n}}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3>{% trans "Summary statistics" %}</h3>
<table class="table" id="summary-stats-table">
    <thead>
        <tr>
            <th></th>
            <th>{% trans "Mean" %}</th>
            <th>{% trans "Lower quartile" %}</th>
            <th>{% trans "Median" %}</th>
            <th>{% trans "Upper quartile" %}</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>

<section id="stacked_status_chart">
    <div class="legend">
        <span class="num_not_attempted">
            <svg class="box" width="20" height="20"><rect width="20" height="20"></rect></svg>
            Not attempted
        </span>
        <span class="num_incorrect">
            <svg class="box" width="20" height="20"><rect width="20" height="20"></rect></svg>
            Incorrect
        </span>
        <span class="num_partial">
            <svg class="box" width="20" height="20"><rect width="20" height="20"></rect></svg>
            Partially correct
        </span>
        <span class="num_correct">
            <svg class="box" width="20" height="20"><rect width="20" height="20"></rect></svg>
            Correct
        </span>
    </div>
    <div class="chart">
        <svg class="diagram"></svg>
    </div>
</section>


<h3>{% trans "Score distribution" %}</h3>
<p>{% blocktrans %}In the following charts, the <i>x</i>-axis represents scaled score, and the <i>y</i>-axis represents the number of attempts achieving that score.{% endblocktrans %}</p>

<section id="question_scores_chart" class="chart"></section>

<h3>{% trans "Attempt times" %}</h3>
<section id="times">
	<p>{% blocktrans %}The following chart shows start and end times of all attempts. Note that students may not be active for the whole of the shown time.{% endblocktrans %}</p>
    <div class="chart">
        <svg class="diagram"></svg>
    </div>
</section>

{% endblock %}

{% block stylesheets %}
    {{block.super}}

	<link rel="stylesheet" href="{% static 'resource-stats.css' %}">
{% endblock %}

{% block javascripts %}
{{block.super}}

    <script src="{% static 'robust-websocket.js' %}"></script>

    <script src="{% static 'luxon/luxon.js' %}"></script>
    <script src="{% static 'd3/d3.min.js' %}"></script>

    <script>
        var data = {{data|safe}};
    </script>

    <script src="{% static 'resource-stats.js' %}" defer></script>
{% endblock %}
